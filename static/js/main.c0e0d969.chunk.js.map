{"version":3,"sources":["actions/index.js","components/Search.jsx","components/Header.jsx","components/Item.jsx","components/ItemsList.jsx","App.jsx","reducers/items.js","reducers/searchedData.js","reducers/index.js","store.js","index.jsx"],"names":["selectItems","state","items","searchedResult","searchedData","Search","handleBack","dispatch","useDispatch","useSelector","shallowEqual","useState","value","setValue","searchData","length","newArray","filter","el","name","match","RegExp","toast","dark","autoClose","type","searchedItems","useEffect","className","placeholder","onChange","e","data","target","onKeyPress","event","charCode","which","code","onClick","src","process","alt","memo","Header","isSearchDataAvailable","setIsSearchDataAvailable","back","goBack","trackWindowScroll","props","height","effect","scrollPosition","ItemsList","count","setCount","layoutRef","useRef","current","searchRenderer","setSearchRenderer","handleScroll","useCallback","preventDefault","body","scrollHeight","window","pageYOffset","documentElement","clientHeight","getData","fetch","headers","then","response","json","myJson","addItems","page","content","addEventListener","removeEventListener","map","searchItem","index","item","connect","action","combineReducers","composeEnhancers","__REDUX_DEVTOOLS_EXTENSION_COMPOSE__","compose","store","createStore","rootReducer","applyMiddleware","getState","next","ReactDOM","render","Store","document","getElementById"],"mappings":"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","file":"static/js/main.c0e0d969.chunk.js","sourcesContent":["export const addItems = items => ({\n    type: 'ADD_ITEMS',\n    items\n});\n\nexport const searchedItems = searchedItems => ({\n    type: 'SEARCHED_ITEMS',\n    searchedItems\n});\n\nexport const removeSearchedItems = () => ({\n    type: 'REMOVE_SEARCHED_ITEMS'\n});\n\nexport const selectItems = (state) => state.items;\n\nexport const searchedResult = (state) => state.searchedData;","/* eslint-disable array-callback-return */\nimport React, {memo, useEffect, useState} from 'react';\nimport { useSelector, useDispatch, shallowEqual } from 'react-redux';\nimport {searchedItems, selectItems, removeSearchedItems} from '../actions';\nimport { ToastContainer, toast } from 'react-toastify';\nconst Search = (handleBack) => {\n    const dispatch = useDispatch();\n    const items= useSelector(selectItems, shallowEqual);\n    const [value, setValue] = useState('');\n    const getSearchQuery = (data) => {\n        setValue(data)\n        if (data.length === 0) dispatch(removeSearchedItems());\n    };\n    const searchData = () => {\n        if (value.length === 0) return;\n        let newArray = items.filter(el => el.name.match(new RegExp(value, 'gi')));\n        if (newArray.length === 0) toast.dark(\"Can't find any movies with this name. Please try some other movies!\", {autoClose: 3000,});\n        dispatch(searchedItems(newArray));\n    };\n    const onEnter = (event) => {\n        if (event.charCode === 13 || event.which === 13 || event.code === 'Enter') {\n            searchData();\n        }\n    }\n    useEffect(() => {\n        if (handleBack) {\n            setValue('');\n            dispatch(removeSearchedItems())\n        }\n    }, [handleBack, dispatch])\nreturn (\n    <div className={'search_field'}>\n        <input name=\"query\" value={value} \n            placeholder=\"Search movies!\" \n            onChange={(e) => getSearchQuery(e.target.value)}\n            onKeyPress={(e) => onEnter(e)}\n        />\n        <button type=\"button\" onClick={searchData}>\n            <img className=\"search-icon\" \n            src={process.env.PUBLIC_URL + '/assets/search.png'} \n            alt=\"Search\" />\n        </button>\n        <ToastContainer />\n    </div>\n);\n};\n\nexport default memo(Search);","import React, {memo, useState, useEffect} from 'react';\nimport { useSelector, shallowEqual, useDispatch} from 'react-redux';\nimport {searchedResult} from '../actions';\nimport Search from './Search';\n\nconst Header = () => {\n    const searchedData = useSelector(searchedResult, shallowEqual);\n    const [isSearchDataAvailable, setIsSearchDataAvailable] = useState(false);\n    const [back, goBack] = useState(false);\n\n    useEffect(() => {\n        if (searchedData.length > 0) {\n            setIsSearchDataAvailable(true)\n        } else {\n            setIsSearchDataAvailable(false)\n        }\n    }, [searchedData]);\n\n    const handleClick = () => {\n        if (!isSearchDataAvailable) return false;\n        goBack(true);\n    }\n\n    return (\n        <div className={'nav-bar'}>\n            <div className={'back-button-container'}>\n                <img src={process.env.PUBLIC_URL + '/assets/Back.png'} \n                alt='back' \n                className={`back-button ${!isSearchDataAvailable && 'blur'}`}\n                onClick={handleClick}\n                />\n            </div>\n            <Search handleBack={back}/>\n        </div>\n    );\n};\n\nexport default memo(Header)","import React from 'react';\nimport PropTypes from 'prop-types'\nimport { LazyLoadImage, trackWindowScroll} from 'react-lazy-load-image-component';\nimport 'react-lazy-load-image-component/src/effects/blur.css';\n\n\nconst Item = (props)  => {\n  return (\n    <div className={'item'}>\n      <LazyLoadImage\n      alt={props.name}\n      height={\"196px\"}\n      effect=\"blur\"\n      scrollPosition={props.scrollPosition}\n      src={props['poster-image'] === 'posterthatismissing.jpg' ? `${process.env.PUBLIC_URL}/assets/placeholder_for_missing_posters.png` : `${process.env.PUBLIC_URL}/assets/${props['poster-image']}`}\n      />\n      <p className={'title'}>{props.name}</p>\n    </div>\n  )\n};\n\nItem.propTypes = {\n  name: PropTypes.string.isRequired\n}\n\nexport default trackWindowScroll(Item);","/* eslint-disable react-hooks/exhaustive-deps */\nimport React, { memo, useRef, useState, useEffect, useCallback } from 'react';\nimport { useSelector, useDispatch, shallowEqual } from 'react-redux';\nimport { addItems, selectItems, searchedResult } from '../actions';\n\nimport Item from './Item';\n\nconst ItemsList = () => {\n    const [count, setCount] = useState(1);\n    const items= useSelector(selectItems, shallowEqual);\n    const searchedData = useSelector(searchedResult);\n    const layoutRef= useRef({});\n    layoutRef.current = count;\n    const dispatch = useDispatch();\n    \n    const [searchRenderer, setSearchRenderer] = useState(false);\n    const setCounter = () => {\n      setCount(layoutRef.current + 1);\n    };\n\n    const handleScroll = useCallback((event) => {\n      event.preventDefault();\n        const target = event.target;\n        if(target.body.scrollHeight - window.pageYOffset === target.documentElement.clientHeight) {\n          if (layoutRef.current < 3) {\n            setCounter();\n            getData();\n          } else {\n          }\n        }\n    }, []);\n\n    const getData = () => {\n        fetch(`API/CONTENTLISTINGPAGE-PAGE${layoutRef.current}.json`\n    ,{\n      headers : { \n        'Content-Type': 'application/json',\n        'Accept': 'application/json'\n       }\n    }\n    )\n      .then(function(response){\n        return response.json();\n      })\n      .then(function(myJson) {\n        dispatch(addItems(myJson.page['content-items'].content));\n      })\n    }\n\n    useEffect(() => {\n      getData();\n    },[]);\n\n    useEffect(() => {\n      setSearchRenderer(true)\n    }, [searchedData])\n\n    useEffect(() => {\n      window.addEventListener('scroll', handleScroll);\n      return () => {\n        window.removeEventListener(\"scroll\", handleScroll);\n      };\n    }, [handleScroll]);\n\n    return (\n        <div className={'item-list'}>\n            {searchRenderer && (\n               searchedData.map((searchItem, index) => (\n                  <Item key={index} {...searchItem}/>\n              ))\n            )}\n            {items.map((item, index) => (\n                <Item key={index} {...item}/>\n            ))}\n\n        </div>\n    )\n}\n\nexport default memo(ItemsList);","import React from 'react';\nimport { connect } from 'react-redux';\n// import { addItems } from './actions';\nimport Header from \"./components/Header\";\nimport ItemsList from \"./components/ItemsList\";\nconst App = ({dispatch }) => {\n    return (\n        <div>\n            <Header />\n            <ItemsList />\n        </div>\n    )\n}\n\nexport default connect()(App)","\nconst items = (state = [], action) => {\n    switch (action.type) {\n        case 'ADD_ITEMS':\n            return [\n                ...state,\n                ...action.items\n            ]\n        default:\n            return state\n    }\n};\n\nexport default items;","\nconst searchedResult = (state = [], action) => {\n    switch (action.type) {\n        case 'SEARCHED_ITEMS':\n            return [\n                ...action.searchedItems\n            ]\n        case 'REMOVE_SEARCHED_ITEMS':\n            return[\n                ...state.searchedItems = []\n            ]\n        default:\n            return state\n    }\n};\n\nexport default searchedResult;","import { combineReducers } from 'redux';\nimport items from './items';\nimport searchedData from './searchedData';\n\nexport default combineReducers({\n    items,\n    searchedData\n});\n","import { applyMiddleware, createStore, compose } from 'redux';\nimport rootReducer from './reducers';\n\n  \n  // VARS\n  // TODO: GET process.env FOR REACT NATIVE AND SHOW THIS DEVTOOLS ONLY ON DEV ENV\n  const composeEnhancers = window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__ || compose;\n\nconst store = createStore(\n    rootReducer,\n    composeEnhancers(\n     applyMiddleware(thunkHandler())\n    )\n   );\n\nfunction thunkHandler() {\n    return ({ dispatch, getState }) => next => action => {\n        if (typeof action === 'function') {\n            return action(dispatch, getState);\n        }\n        return next(action);\n    };\n}\n\nexport default store;","import React from 'react';\nimport ReactDOM from 'react-dom';\n\nimport { Provider } from 'react-redux';\nimport App from './App';\nimport Store from './store';\n\nimport 'react-toastify/dist/ReactToastify.css';\nimport './index.css';\n\n\nReactDOM.render(\n    <Provider store={ Store }>\n        <div className={'wrapper'} >\n        <App />\n        </div>\n    </Provider>, \n    document.getElementById('root')\n);"],"sourceRoot":""}